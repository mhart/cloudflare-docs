---
pcx_content_type: configuration
title: Workers Bindings
sidebar:
  order: 1
---

import { Type, MetaInfo, WranglerConfig } from "~/components";
import { Dropdown } from "~/components/ui/dropdown.tsx";

<div class="flex items-center justify-between">
	<h2>Workers</h2>
	<Dropdown
		client:load
		copyText={
			"#codebase Modify the existing `wrangler.json` to add this binding:\r\n \r\n ```json\r\n {\r\n  \"ai\": {\r\n    \"binding\": \"AI\"\r\n  }\r\n}\r\n ```\r\n \r\nModify the existing `Env` interface (often in `worker-configuration.d.ts`) to include:\r\n\r\n```typescript\r\ninterface Env {\r\n  AI: Ai;\r\n}\r\n```\r\n\r\n Modify the main worker fetch handler to return this response:\r\n\r\n ```typescript\r\nif (new URL(request.url).pathname === '/chat') {\r\n    const stream = await env.AI.run('@cf/meta/llama-3.1-8b-instruct', {\r\n      stream: true,\r\n      messages: [\r\n        { role: 'system', content: 'You are a helpful assistant' },\r\n        { role: 'user', content: \"How many r's in strawberry? Think through step by step\" },\r\n      ],\r\n    });\r\n\r\n    return new Response(stream as ReadableStream, {\r\n      headers: { 'content-type': 'text/event-stream' },\r\n    });\r\n}\r\n```"
		}
	/>
</div>

[Workers](/workers/) provides a serverless execution environment that allows you to create new applications or augment existing ones.

To use Workers AI with Workers, you must create a Workers AI [binding](/workers/runtime-apis/bindings/). Bindings allow your Workers to interact with resources, like Workers AI, on the Cloudflare Developer Platform. You create bindings on the Cloudflare dashboard or by updating your [Wrangler file](/workers/wrangler/configuration/).

To bind Workers AI to your Worker, add the following to the end of your Wrangler file:

<WranglerConfig>

```toml
[ai]
binding = "AI" # i.e. available in your Worker on env.AI
```

</WranglerConfig>

## Pages Functions

[Pages Functions](/pages/functions/) allow you to build full-stack applications with Cloudflare Pages by executing code on the Cloudflare network. Functions are Workers under the hood.

To configure a Workers AI binding in your Pages Function, you must use the Cloudflare dashboard. Refer to [Workers AI bindings](/pages/functions/bindings/#workers-ai) for instructions.

## Methods

### async env.AI.run()

`async env.AI.run()` runs a model. Takes a model as the first parameter, and an object as the second parameter.

```javascript
const answer = await env.AI.run("@cf/meta/llama-3.1-8b-instruct", {
	prompt: "What is the origin of the phrase 'Hello, World'",
});
```

**Parameters**

- `model` <Type text="string" /> <MetaInfo text="required" />

  - The model to run.

  **Supported options**

  - `stream` <Type text="boolean" /> <MetaInfo text="optional" />
    - Returns a stream of results as they are available.

```javascript
const answer = await env.AI.run("@cf/meta/llama-3.1-8b-instruct", {
	prompt: "What is the origin of the phrase 'Hello, World'",
	stream: true,
});

return new Response(answer, {
	headers: { "content-type": "text/event-stream" },
});
```
